generator client {
  provider = "prisma-client-js"
  output   = "./generate"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TransactionStatus {
  FINALIZED
  FAILED
}

model User {
  id                   String        @id @default(uuid())
  name                 String
  balance              Decimal       @default(0.00) @db.Decimal(15, 2)
  createdAt            DateTime      @default(now()) @map("created_at")
  updatedAt            DateTime      @default(now()) @updatedAt @map("updated_at")
  sentTransactions     Transaction[] @relation("SentTransactions")
  receivedTransactions Transaction[] @relation("ReceivedTransactions")

  @@map("users")
}

model Transaction {
  id         String            @id @default(uuid())
  senderId   String            @map("sender_id")
  receiverId String            @map("receiver_id")
  amount     Decimal           @db.Decimal(15, 2)
  status     TransactionStatus
  createdAt  DateTime          @default(now()) @map("created_at")
  updatedAt  DateTime          @default(now()) @updatedAt @map("updated_at")
  sender     User?             @relation("SentTransactions", fields: [senderId], references: [id])
  receiver   User?             @relation("ReceivedTransactions", fields: [receiverId], references: [id])

  @@map("transactions")
}
